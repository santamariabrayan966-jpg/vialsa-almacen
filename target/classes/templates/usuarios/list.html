<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title th:text="${titulo}">Usuarios del Sistema | VIALSA</title>

    <!-- ðŸ”¹ Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- ðŸ”¹ Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

    <!-- ðŸ”¹ Tema general -->
    <link th:href="@{/css/theme.css}" rel="stylesheet">
</head>

<body class="bg-light d-flex flex-column min-vh-100">

<!-- âœ… Encabezado -->
<div th:replace="~{fragments/header :: header}"></div>

<!-- ðŸ§© Contenido principal -->
<main class="container mt-5 flex-grow-1">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="fw-bold text-danger m-0">
            <i class="bi bi-people"></i> Usuarios del Sistema
        </h2>
        <a class="btn btn-success shadow-sm" th:href="@{/usuarios/nuevo}">
            <i class="bi bi-person-plus"></i> Nuevo Usuario
        </a>
    </div>

    <!-- ðŸ§¾ Tabla de usuarios -->
    <div class="card shadow-sm border-0">
        <div class="card-body p-0">
            <table class="table table-hover align-middle mb-0">
                <thead class="table-primary text-center">
                <tr>
                    <th>ID</th>
                    <th>Nombre de Usuario</th>
                    <th>Rol</th>
                    <th>Acciones</th>
                </tr>
                </thead>
                <tbody th:if="${usuarios != null and !#lists.isEmpty(usuarios)}" class="text-center">
                <tr th:each="u : ${usuarios}">
                    <td th:text="${u.idUsuario}">1</td>
                    <td th:text="${u.nombreUsuario}">admin</td>
                    <td th:text="${u.nombreRol}">Administrador</td>
                    <td>
                        <a th:href="@{|/usuarios/editar/${u.idUsuario}|}" class="btn btn-warning btn-sm me-2">
                            <i class="bi bi-pencil-square"></i> Editar
                        </a>
                        <a th:href="@{|/usuarios/eliminar/${u.idUsuario}|}"
                           class="btn btn-danger btn-sm"
                           onclick="return confirm('Â¿Seguro que deseas eliminar este usuario?');">
                            <i class="bi bi-trash"></i> Eliminar
                        </a>
                    </td>
                </tr>
                </tbody>

                <!-- âš ï¸ Si no hay usuarios -->
                <tbody th:if="${usuarios == null or #lists.isEmpty(usuarios)}">
                <tr>
                    <td colspan="4" class="text-center text-muted py-4">
                        <i class="bi bi-exclamation-triangle"></i> No hay usuarios registrados.
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</main>

<!-- âœ… Pie de pÃ¡gina -->
<div th:replace="~{fragments/footer :: footer}"></div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
